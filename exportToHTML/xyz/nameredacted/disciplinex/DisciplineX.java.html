<html>
<head>
<title>DisciplineX.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #3d8beb; font-style: italic;}
.s1 { color: #ececee;}
.s2 { color: #ffffff; font-style: italic;}
.s3 { color: #40bf77;}
.s4 { color: #6f7a86; font-style: italic;}
.s5 { color: #ffffff;}
</style>
</head>
<body bgcolor="#202831">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
DisciplineX.java</font>
</center></td></tr></table>
<pre><span class="s0">package </span><span class="s1">xyz</span><span class="s2">.</span><span class="s1">nameredacted</span><span class="s2">.</span><span class="s1">disciplinex</span><span class="s3">;</span>

<span class="s0">import </span><span class="s1">org</span><span class="s2">.</span><span class="s1">bukkit</span><span class="s2">.</span><span class="s1">plugin</span><span class="s2">.</span><span class="s1">java</span><span class="s2">.</span><span class="s1">JavaPlugin</span><span class="s3">;</span>
<span class="s0">import </span><span class="s1">org</span><span class="s2">.</span><span class="s1">jetbrains</span><span class="s2">.</span><span class="s1">annotations</span><span class="s2">.</span><span class="s1">NotNull</span><span class="s3">;</span>
<span class="s0">import </span><span class="s1">xyz</span><span class="s2">.</span><span class="s1">nameredacted</span><span class="s2">.</span><span class="s1">disciplinex</span><span class="s2">.</span><span class="s1">api</span><span class="s2">.</span><span class="s1">db</span><span class="s2">.</span><span class="s1">DatabaseHandler</span><span class="s3">;</span>
<span class="s0">import </span><span class="s1">xyz</span><span class="s2">.</span><span class="s1">nameredacted</span><span class="s2">.</span><span class="s1">disciplinex</span><span class="s2">.</span><span class="s1">cmd</span><span class="s2">.</span><span class="s1">moderation</span><span class="s2">.</span><span class="s1">BanCommand</span><span class="s3">;</span>
<span class="s0">import </span><span class="s1">xyz</span><span class="s2">.</span><span class="s1">nameredacted</span><span class="s2">.</span><span class="s1">disciplinex</span><span class="s2">.</span><span class="s1">cmd</span><span class="s2">.</span><span class="s1">moderation</span><span class="s2">.</span><span class="s1">KickCommand</span><span class="s3">;</span>
<span class="s0">import </span><span class="s1">xyz</span><span class="s2">.</span><span class="s1">nameredacted</span><span class="s2">.</span><span class="s1">disciplinex</span><span class="s2">.</span><span class="s1">cmd</span><span class="s2">.</span><span class="s1">moderation</span><span class="s2">.</span><span class="s1">MuteCommand</span><span class="s3">;</span>
<span class="s0">import </span><span class="s1">xyz</span><span class="s2">.</span><span class="s1">nameredacted</span><span class="s2">.</span><span class="s1">disciplinex</span><span class="s2">.</span><span class="s1">cmd</span><span class="s2">.</span><span class="s1">moderation</span><span class="s2">.</span><span class="s1">WarnCommand</span><span class="s3">;</span>

<span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">logging</span><span class="s2">.</span><span class="s1">Logger</span><span class="s3">;</span>

<span class="s4">/**</span>
 <span class="s4">* This class is the main class of the plugin.</span>
 <span class="s4">* It is used to initialise the plugin and</span>
 <span class="s4">* to import all the commands.</span>
 <span class="s4">*/</span>
<span class="s0">public final class </span><span class="s1">DisciplineX </span><span class="s0">extends </span><span class="s1">JavaPlugin </span><span class="s5">{</span>

    <span class="s0">private static </span><span class="s1">Logger log</span><span class="s3">;</span>
    <span class="s0">private static </span><span class="s1">DisciplineX instance</span><span class="s3">;</span>
    <span class="s0">private </span><span class="s1">DatabaseHandler db</span><span class="s3">;</span>

    <span class="s1">@Override</span>
    <span class="s0">public void </span><span class="s1">onEnable</span><span class="s5">() {</span>
        <span class="s4">// Plugin startup logic</span>
        <span class="s4">// Initialise static variables</span>
        <span class="s1">log </span><span class="s3">= </span><span class="s1">getLogger</span><span class="s5">()</span><span class="s3">;</span>
        <span class="s1">setInstance</span><span class="s5">(</span><span class="s0">this</span><span class="s5">)</span><span class="s3">;</span>
        <span class="s1">importCommands</span><span class="s5">()</span><span class="s3">;</span>
        <span class="s1">db </span><span class="s3">= </span><span class="s0">new </span><span class="s1">DatabaseHandler</span><span class="s5">()</span><span class="s3">;</span>
        <span class="s1">db</span><span class="s2">.</span><span class="s1">setupDatabase</span><span class="s5">()</span><span class="s3">;</span>

        <span class="s4">/**</span>
         <span class="s4">* TODO: First-run startup sequence.</span>
         <span class="s4">*</span>
         <span class="s4">* First:</span>
         <span class="s4">* - Check if the plugin has been run before.</span>
         <span class="s4">* - Then, before setting the database up inform the user the plugin has the function to completely wipe the database.</span>
         <span class="s4">* - Send a SHA256-encrypted code to the console.</span>
         <span class="s4">* - Have the user write it down somewhere, then type the code in.</span>
         <span class="s4">* - Setup database</span>
         <span class="s4">* - Continue running.</span>
         <span class="s4">*/</span>
    <span class="s5">}</span>

    <span class="s1">@Override</span>
    <span class="s0">public void </span><span class="s1">onDisable</span><span class="s5">() {</span>
        <span class="s4">// Plugin shutdown logic</span>
    <span class="s5">}</span>


    <span class="s4">/**</span>
     <span class="s4">* This class is used to import every command</span>
     <span class="s4">* into the plugin. Make sure each command</span>
     <span class="s4">* is correctly included in the plugin.yml, or else</span>
     <span class="s4">* it will not be recognized by the plugin.</span>
     <span class="s4">*/</span>
    <span class="s1">@SuppressWarnings</span><span class="s5">(</span><span class="s3">&quot;ConstantConditions&quot;</span><span class="s5">)</span>
    <span class="s0">private void </span><span class="s1">importCommands</span><span class="s5">() {</span>
        <span class="s1">getCommand</span><span class="s5">(</span><span class="s3">&quot;kick&quot;</span><span class="s5">)</span><span class="s2">.</span><span class="s1">setExecutor</span><span class="s5">(</span><span class="s0">new </span><span class="s1">KickCommand</span><span class="s5">())</span><span class="s3">;</span>
        <span class="s1">getCommand</span><span class="s5">(</span><span class="s3">&quot;ban&quot;</span><span class="s5">)</span><span class="s2">.</span><span class="s1">setExecutor</span><span class="s5">(</span><span class="s0">new </span><span class="s1">BanCommand</span><span class="s5">())</span><span class="s3">;</span>
        <span class="s1">getCommand</span><span class="s5">(</span><span class="s3">&quot;warn&quot;</span><span class="s5">)</span><span class="s2">.</span><span class="s1">setExecutor</span><span class="s5">(</span><span class="s0">new </span><span class="s1">WarnCommand</span><span class="s5">())</span><span class="s3">;</span>
        <span class="s1">getCommand</span><span class="s5">(</span><span class="s3">&quot;mute&quot;</span><span class="s5">)</span><span class="s2">.</span><span class="s1">setExecutor</span><span class="s5">(</span><span class="s0">new </span><span class="s1">MuteCommand</span><span class="s5">())</span><span class="s3">;</span>
    <span class="s5">}</span>

    <span class="s0">public static void </span><span class="s1">severeError</span><span class="s5">(</span><span class="s0">final </span><span class="s1">@NotNull String msg</span><span class="s5">) {</span>
        <span class="s1">log</span><span class="s2">.</span><span class="s1">severe</span><span class="s5">(</span><span class="s1">msg</span><span class="s5">)</span><span class="s3">;</span>
    <span class="s5">}</span>

    <span class="s0">public void </span><span class="s1">shutdownPlugin</span><span class="s5">() {</span>
        <span class="s1">getServer</span><span class="s5">()</span><span class="s2">.</span><span class="s1">getPluginManager</span><span class="s5">()</span><span class="s2">.</span><span class="s1">disablePlugin</span><span class="s5">(</span><span class="s0">this</span><span class="s5">)</span><span class="s3">;</span>
    <span class="s5">}</span>

    <span class="s0">public static </span><span class="s1">DisciplineX getInstance</span><span class="s5">() {</span>
        <span class="s0">return </span><span class="s1">instance</span><span class="s3">;</span>
    <span class="s5">}</span>

    <span class="s0">public static void </span><span class="s1">setInstance</span><span class="s5">(</span><span class="s1">DisciplineX instance</span><span class="s5">) {</span>
        <span class="s1">DisciplineX</span><span class="s2">.</span><span class="s1">instance </span><span class="s3">= </span><span class="s1">instance</span><span class="s3">;</span>
    <span class="s5">}</span>

    <span class="s0">public </span><span class="s1">DatabaseHandler getDb</span><span class="s5">() {</span>
        <span class="s0">return </span><span class="s1">db</span><span class="s3">;</span>
    <span class="s5">}</span>
<span class="s5">}</span>
</pre>
</body>
</html>